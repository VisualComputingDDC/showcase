<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Image Processing # 1. Introduction & Background # Digital image processing is the use of a digital computer to process digital images through an algorithm (Atalla & Kahng, n.d.). In webgl (i.e., GLSL ES) texturing is used to implement image processing (Charalambos, 2023).
For this exercise, different effects were applied to an image and a video. Using image processing through texturing, and implementing convolutions to apply different masks or kernels."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Image Processing # 1. Introduction & Background # Digital image processing is the use of a digital computer to process digital images through an algorithm (Atalla & Kahng, n.d.). In webgl (i.e., GLSL ES) texturing is used to implement image processing (Charalambos, 2023).
For this exercise, different effects were applied to an image and a video. Using image processing through texturing, and implementing convolutions to apply different masks or kernels."><meta property="og:type" content="article"><meta property="og:url" content="https://VisualComputingDDC.github.io/showcase/docs/shortcodes/shaders/Image-Processing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-19T16:57:03-05:00"><title>Image Processing | Visual Computing 2023-1 - G1 - DDC</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual Computing 2023-1 - G1 - DDC</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/showcase/docs/shortcodes/group-members/>Group Members</a></li><li><input type=checkbox id=section-6d6445ed16f829ce6720abb33c55105e class=toggle checked>
<label for=section-6d6445ed16f829ce6720abb33c55105e class="flex justify-between"><a href=/showcase/docs/shortcodes/shaders/>Shaders</a></label><ul><li><input type=checkbox id=section-2f065ccbcba70d5bdd25eb8a8f238142 class=toggle>
<label for=section-2f065ccbcba70d5bdd25eb8a8f238142 class="flex justify-between"><a role=button>Coloring</a></label><ul><li><a href=/showcase/docs/shortcodes/shaders/Coloring/Brightness-Coloring/>Brightness Coloring</a></li><li><a href=/showcase/docs/shortcodes/shaders/Coloring/Normal-Coloring/>Normal Coloring</a></li></ul></li><li><a href=/showcase/docs/shortcodes/shaders/Image-Processing/ class=active>Image Processing</a></li><li><a href=/showcase/docs/shortcodes/shaders/Photomosaic/>Photomosaic</a></li><li><a href=/showcase/docs/shortcodes/shaders/Post-Effects/>Post Effects</a></li><li><a href=/showcase/docs/shortcodes/shaders/Procedural-Texturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/shortcodes/shaders/Spatial-Coherence/>Spatial Coherence</a></li><li><a href=/showcase/docs/shortcodes/shaders/Texturing/>Texturing</a></li></ul></li><li><input type=checkbox id=section-67f2b433a931c89e2e9c26b761fd42ff class=toggle>
<label for=section-67f2b433a931c89e2e9c26b761fd42ff class="flex justify-between"><a href=/showcase/docs/shortcodes/visual-illusions/>Visual Illusions</a></label><ul><li><a href=/showcase/docs/shortcodes/visual-illusions/Academic-Report-3D-terrain-generation-with-perlin-noise/>Academic Report 3 D Terrain Generation With Perlin Noise</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/Academic-Report-Color-Average/>Academic Report Color Average</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/Academic-Report-Color-Blind/>Academic Report Color Blind</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/Academic-Report-Moir%C3%A9-Patterns/>Academic Report Moir√© Patterns</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/Academic-Report-Spatial-Coherence/>Academic Report Spatial Coherence</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/Presentation-Video/>Presentation Video</a></li></ul></li></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Image Processing</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#image-processing>Image Processing</a><ul><li><a href=#1-introduction--background>1. Introduction & Background</a></li><li><a href=#2-code--results>2. Code & results</a></li><li><a href=#3-conclusions--future-work>3. Conclusions & future work</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=image-processing>Image Processing
<a class=anchor href=#image-processing>#</a></h1><h2 id=1-introduction--background>1. Introduction & Background
<a class=anchor href=#1-introduction--background>#</a></h2><p>Digital image processing is the use of a digital computer to process digital images through an algorithm (Atalla & Kahng, n.d.). In webgl (i.e., GLSL ES) texturing is used to implement image processing (Charalambos, 2023).</p><p>For this exercise, different effects were applied to an image and a video. Using image processing through texturing, and implementing convolutions to apply different masks or kernels.</p><p>Convolution is a general purpose filter effect for images. It is a matrix applied to an image and a mathematical operation composed of integers. It works by determining the value of a central pixel by adding the weighted values of all its neighbors together. The output is a new modified filtered image.</p><p>A kernel is a (usually) small matrix of numbers that is used in image convolutions (Ludwig, n.d.).</p><ul><li>Differently sized kernels containing different patterns of numbers produce different results under convolution.</li><li>The size of a kernel is arbitrary but 3x3 is often used.</li></ul><p>For this exercise, different kernels of differents sizes were used, to generate the next filters:</p><ul><li>Edge detection: Edge detection includes a variety of mathematical methods that aim at identifying edges, curves in a digital image at which the image brightness changes sharply or, more formally, has discontinuities (Edge Detection, n.d.).</li><li>Emboss: The emboss kernel (similar to the sobel kernel and sometimes referred to mean the same) gives the illusion of depth by emphasizing the differences of pixels in a given direction (Powell, n.d.).</li><li>Blur: The blur kernel de-emphasizes differences in adjacent pixel values.</li><li>Magnifier: Magnification is the process of enlarging the apparent size, not physical size, of something (in this case, an image) (Magnification, n.d.).</li></ul><p>There exist various applications of Image Processing, like facial expression recognition using thermal image processing, application of image processing to in-vitro human, matching of infrared and visual images, enhancement of satellite image, etc. (Carvalho, 2012)</p><h2 id=2-code--results>2. Code & results
<a class=anchor href=#2-code--results>#</a></h2><details open><summary>setup()</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>550</span>, <span style=color:#ae81ff>300</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, 
</span></span><span style=display:flex><span>                               <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>                               <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>])
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emitResolution</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Video&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>src</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>checked</span>() <span style=color:#f92672>?</span> <span style=color:#a6e22e>video_src</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>img_src</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>checked</span>() <span style=color:#f92672>?</span> <span style=color:#a6e22e>video_src</span>.<span style=color:#a6e22e>loop</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>video_src</span>.<span style=color:#a6e22e>pause</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_on</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>420</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emitTexOffset</span>(<span style=color:#a6e22e>myShader</span>, <span style=color:#a6e22e>src</span>, [<span style=color:#a6e22e>uniform</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;texOffset&#39;</span>]);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>edge</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Edge detection&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>edge</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>420</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>edge</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>edge</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>edge</span>.<span style=color:#a6e22e>checked</span>() <span style=color:#f92672>?</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, 
</span></span><span style=display:flex><span>                                                                 <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>8.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, 
</span></span><span style=display:flex><span>                                                                 <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>]
</span></span><span style=display:flex><span>                                ) <span style=color:#f92672>:</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, 
</span></span><span style=display:flex><span>                                                                 <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, 
</span></span><span style=display:flex><span>                                                                 <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>]));
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emboss</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Emboss&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emboss</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>420</span>, <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emboss</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emboss</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>emboss</span>.<span style=color:#a6e22e>checked</span>() <span style=color:#f92672>?</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>,  <span style=color:#ae81ff>0.0</span>, 
</span></span><span style=display:flex><span>                                                                     <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>,  <span style=color:#ae81ff>1.0</span>,  <span style=color:#ae81ff>1.0</span>, 
</span></span><span style=display:flex><span>                                                                      <span style=color:#ae81ff>0.0</span>,  <span style=color:#ae81ff>1.0</span>,  <span style=color:#ae81ff>2.0</span>]
</span></span><span style=display:flex><span>                                    ) <span style=color:#f92672>:</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>                                                                     <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>                                                                     <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>]));
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blur</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Blur&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blur</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>420</span>, <span style=color:#ae81ff>70</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blur</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blur</span>.<span style=color:#a6e22e>input</span>(() =&gt; {<span style=color:#a6e22e>blur</span>.<span style=color:#a6e22e>checked</span>() <span style=color:#f92672>?</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask5&#39;</span>, 
</span></span><span style=display:flex><span>  [<span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>6.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>,
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>16.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>24.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>16.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>,
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>6.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>24.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>48.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>24.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>6.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>,
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>16.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>24.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>16.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>,
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>6.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>, <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>256.0</span>]
</span></span><span style=display:flex><span>                                 ) <span style=color:#f92672>:</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, 
</span></span><span style=display:flex><span>                                                                  <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>                                                                  <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>]);
</span></span><span style=display:flex><span>                                     <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;blur&#39;</span>, <span style=color:#a6e22e>blur</span>.<span style=color:#a6e22e>checked</span>())});
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Magnifier&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>420</span>, <span style=color:#ae81ff>90</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>changed</span>(() =&gt; { <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;magnifier&#39;</span>, <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>checked</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>checked</span>() <span style=color:#f92672>?</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;edge&#39;</span>, <span style=color:#66d9ef>false</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;edge&#39;</span>, <span style=color:#a6e22e>edge</span>.<span style=color:#a6e22e>checked</span>());
</span></span><span style=display:flex><span>                          });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><ul><li><p>setup()</p><p>myShader.setUniform(&lsquo;mask&rsquo;, [0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0]) sets a uniform variable named &lsquo;mask&rsquo; in the shader with an initial value of [0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0]. This uniform will be used in the shader to control the visual effect. This mask represents the identity effect, so this will show just the original texture.</p><p>emitResolution(myShader) is a function that sets the resolution uniform of the shader to match the canvas size.</p><p>When the &lsquo;Edge detection&rsquo; checkbox is checked, the &lsquo;mask&rsquo; uniform in the shader is set to the values [-1.0, -1.0, -1.0, -1.0, 8.0, -1.0, -1.0, -1.0, -1.0]. If the checkbox is unchecked, the &lsquo;mask&rsquo; uniform is set to the identity matrix.</p><p>Similar to the &lsquo;Edge detection&rsquo; checkbox, the &lsquo;Emboss&rsquo; checkbox sets the &lsquo;mask&rsquo; uniform in the shader to [-2.0, -1.0, 0.0, -1.0, 1.0, 1.0, 0.0, 1.0, 2.0] when checked, and the identity matrix when unchecked.</p><p>The &lsquo;Blur&rsquo; checkbox sets the &lsquo;mask5&rsquo; uniform in the shader to a 5x5 mask array when checked, which represents a blur effect. When unchecked, the &lsquo;mask&rsquo; uniform is set to the identity matrix.</p><p>The &lsquo;Magnifier&rsquo; checkbox toggles the &lsquo;magnifier&rsquo; uniform in the shader. When checked, &lsquo;magnifier&rsquo; is set to true. When unchecked, &lsquo;magnifier&rsquo; is set to false.</p></li></ul><details open><summary>draw()</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>src</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emitMousePosition</span>(<span style=color:#a6e22e>myShader</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beginShape</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>(<span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>endShape</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><ul><li><p>draw()</p><p>emitMousePosition(myShader) is a custom function that updates the &lsquo;u_mouse&rsquo; uniform in the shader with the current mouse position.</p></li></ul><details open><summary>myShader.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>precision mediump <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>uniform sampler2D texture;
</span></span><span style=display:flex><span><span style=color:#75715e>// see the emitTexOffset() treegl macro
</span></span></span><span style=display:flex><span><span style=color:#75715e>// https://github.com/VisualComputing/p5.treegl#macros
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>uniform vec2 texOffset;
</span></span><span style=display:flex><span><span style=color:#75715e>// holds the 3x3 kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>uniform <span style=color:#66d9ef>float</span> mask[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// holds the 5x5 kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>uniform <span style=color:#66d9ef>float</span> mask5[<span style=color:#ae81ff>25</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// we need our interpolated tex coord
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>varying vec2 texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>uniform vec2 u_resolution;
</span></span><span style=display:flex><span>uniform vec2 u_mouse;
</span></span><span style=display:flex><span>uniform <span style=color:#66d9ef>bool</span> magnifier;
</span></span><span style=display:flex><span>uniform <span style=color:#66d9ef>bool</span> edge;
</span></span><span style=display:flex><span>uniform <span style=color:#66d9ef>bool</span> blur;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  vec2 st <span style=color:#f92672>=</span> gl_FragCoord.xy<span style=color:#f92672>/</span>u_resolution;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> pct <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> distanceToMouse <span style=color:#f92672>=</span> <span style=color:#a6e22e>distance</span>(st, u_mouse<span style=color:#f92672>/</span>u_resolution);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Only apply the convolution within a certain radius of the mouse
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>float</span> convolutionRadius <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.25</span>; <span style=color:#75715e>// Adjust this value to control the radius of the convolution
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (magnifier) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> radius<span style=color:#f92672>=</span><span style=color:#ae81ff>1.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> depth<span style=color:#f92672>=</span>radius<span style=color:#f92672>/</span><span style=color:#ae81ff>4.0</span>;
</span></span><span style=display:flex><span>    vec2 center <span style=color:#f92672>=</span> u_mouse.xy <span style=color:#f92672>/</span> u_resolution.xy;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> ax <span style=color:#f92672>=</span> ((st.x <span style=color:#f92672>-</span> center.x) <span style=color:#f92672>*</span> (st.x <span style=color:#f92672>-</span> center.x)) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>0.2</span><span style=color:#f92672>*</span><span style=color:#ae81ff>0.2</span>) <span style=color:#f92672>+</span> ((st.y <span style=color:#f92672>-</span> center.y) <span style=color:#f92672>*</span> (st.y <span style=color:#f92672>-</span> center.y)) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>0.2</span> <span style=color:#f92672>/</span> (u_resolution.x <span style=color:#f92672>/</span> u_resolution.y));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> dx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>+</span> (<span style=color:#f92672>-</span>depth <span style=color:#f92672>/</span> radius) <span style=color:#f92672>*</span> ax <span style=color:#f92672>+</span> (depth <span style=color:#f92672>/</span> (radius <span style=color:#f92672>*</span> radius)) <span style=color:#f92672>*</span> ax <span style=color:#f92672>*</span> ax;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> f <span style=color:#f92672>=</span> (ax <span style=color:#f92672>+</span> dx);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (ax <span style=color:#f92672>&gt;</span> radius) f <span style=color:#f92672>=</span> ax;
</span></span><span style=display:flex><span>    vec2 magnifierArea <span style=color:#f92672>=</span> center <span style=color:#f92672>+</span> (st <span style=color:#f92672>-</span> center) <span style=color:#f92672>*</span> f <span style=color:#f92672>/</span> ax;
</span></span><span style=display:flex><span>    magnifierArea.y <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> magnifierArea.y;
</span></span><span style=display:flex><span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>texture2D</span>(texture, magnifierArea));
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (distanceToMouse <span style=color:#f92672>&lt;</span> convolutionRadius) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (blur) {
</span></span><span style=display:flex><span>      vec2 tc0 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc1 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc2 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc3 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(texOffset.s, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc4 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      vec2 tc5 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc6 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc7 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc8 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(texOffset.s, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc9 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      vec2 tc10 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>      vec2 tc11 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>      vec2 tc12 <span style=color:#f92672>=</span> texcoords2;  <span style=color:#75715e>// Current fragment&#39;s texture coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      vec2 tc13 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(texOffset.s, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>      vec2 tc14 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      vec2 tc15 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc16 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc17 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>0.0</span>, texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc18 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(texOffset.s, texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc19 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, texOffset.t);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      vec2 tc20 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc21 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc22 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc23 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(texOffset.s, <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc24 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.s, <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> texOffset.t);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Sample texel neighbors within the 5x5 matrix
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      vec4 rgba[<span style=color:#ae81ff>25</span>];
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc0);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc1);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc2);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc3);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc4);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc5);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc6);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc7);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc8);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>9</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc9);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>10</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc10);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>11</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc11);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>12</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc12);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>13</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc13);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>14</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc14);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>15</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc15);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>16</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc16);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>17</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc17);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>18</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc18);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>19</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc19);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>20</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc20);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>21</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc21);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>22</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc22);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>23</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc23);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>24</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc24);
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      vec4 convolution;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>25</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        convolution <span style=color:#f92672>+=</span> rgba[i]<span style=color:#f92672>*</span>mask5[i];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 4. Set color from convolution
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      gl_FragColor <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(convolution.rgb, <span style=color:#ae81ff>1.0</span>); 
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      vec2 tc0 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc1 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc2 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span>texOffset.s, <span style=color:#f92672>-</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc3 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>      <span style=color:#75715e>// origin (current fragment texcoords)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      vec2 tc4 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>      vec2 tc5 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span>texOffset.s,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>      vec2 tc6 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span>texOffset.s, <span style=color:#f92672>+</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc7 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>+</span>texOffset.t);
</span></span><span style=display:flex><span>      vec2 tc8 <span style=color:#f92672>=</span> texcoords2 <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span>texOffset.s, <span style=color:#f92672>+</span>texOffset.t);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 2. Sample texel neighbours within the rgba array
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      vec4 rgba[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc0);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc1);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc2);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc3);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc4);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc5);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc6);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc7);
</span></span><span style=display:flex><span>      rgba[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, tc8);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 3. Apply convolution kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      vec4 convolution;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>9</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        convolution <span style=color:#f92672>+=</span> rgba[i]<span style=color:#f92672>*</span>mask[i];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 4. Set color from convolution
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      gl_FragColor <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(convolution.rgb, <span style=color:#ae81ff>1.0</span>); 
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>     <span style=color:#75715e>// If the pixel is outside the convolution radius, simply display the original texture color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    gl_FragColor <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(texture, texcoords2);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><ul><li><p>myShader.frag</p><p>uniform sampler2D texture represents the input texture that the shader will process.
uniform vec2 texOffset holds the texture offset used for sampling neighboring texels.
uniform float mask[9] is a 3x3 kernel used for convolution.
uniform float mask5[25] is a 5x5 kernel used for convolution.</p><p>uniform vec2 u_resolution stores the resolution of the canvas.
uniform vec2 u_mouse stores the current mouse position.
uniform bool magnifier determines whether to apply a magnification effect.
uniform bool blur determines whether to apply blurring.</p><p>The distanceToMouse variable calculates the distance between the current fragment and the mouse position.</p><p>If magnifier is true, the shader applies a magnification effect. It calculates the distance between the current fragment and the mouse position, modifies the texture coordinates accordingly, and samples the texture to get the magnified color. The result is assigned to gl_FragColor.</p><p>If blur is true, the shader applies a blurring effect. It samples neighboring texels within a 5x5 matrix using offsets, multiplies each texel color with the corresponding value from the mask5 kernel, and sums up the results. The final convolution result is assigned to gl_FragColor.</p><p>If blur is false, the shader applies the mask convolution kernel to sample and convolve neighboring texels within a 3x3 matrix. The convolution result is assigned to gl_FragColor.</p><p>If the current fragment is outside the convolution radius (determined by distanceToMouse), the original texture color is assigned to gl_FragColor.</p><br><iframe id=image_processing style=width:575px;height:325px srcdoc="
            <!DOCTYPE html>
            <html>
              <head>
                <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
                <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
                 <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
                
                
                
                
                <script src=/showcase/sketches/image_processing.js></script>
              </head>
              <body>
              </body>
            </html>
          "></iframe></li></ul><h2 id=3-conclusions--future-work>3. Conclusions & future work
<a class=anchor href=#3-conclusions--future-work>#</a></h2><p>Based on the background given and the results of the code, some conclusions can be mentioned:</p><ul><li>Image processing can be used to create effects on images and videos.</li><li>A kernel is a mask that represents the effect in a numerical way.</li><li>A convolution can be very useful to implement the effects defined on the kernels.</li><li>The effects can be applied only to certain parts of the image, for example, around the mouse position.</li></ul><p>This was a simple exercise that showed some effects using image processing. In the future, way more effects could be created, trying with way more kernel sizes. Also, image processing could be implemented in other media formats like video-games. Finally, more implementations of image processing apart from effects could be implemented, like facial recognition, matching of images, etc.</p><h2 id=references>References
<a class=anchor href=#references>#</a></h2><ul><li>Atalla, M. M., & Kahng, D. (n.d.). Digital image processing. Wikipedia. Retrieved June 19, 2023, from <a href=https://en.wikipedia.org/wiki/Digital_image_processing>https://en.wikipedia.org/wiki/Digital_image_processing</a></li><li>Charalambos, J. P. (2023, April 22). Image Processing. Visual Computing. Retrieved June 19, 2023, from <a href=https://visualcomputing.github.io/docs/shaders/image_processing/>https://visualcomputing.github.io/docs/shaders/image_processing/</a></li><li>Edge detection. (n.d.). Wikipedia. Retrieved June 19, 2023, from <a href=https://en.wikipedia.org/wiki/Edge_detection>https://en.wikipedia.org/wiki/Edge_detection</a></li><li>Ludwig, J. (n.d.). Image Convolution. Portland State University. Retrieved June 19, 2023, from <a href=https://web.pdx.edu/~jduh/courses/Archive/geog481w07/Students/Ludwig_ImageConvolution.pdf>https://web.pdx.edu/~jduh/courses/Archive/geog481w07/Students/Ludwig_ImageConvolution.pdf</a></li><li>Magnification. (n.d.). Wikipedia. Retrieved June 19, 2023, from <a href=https://en.wikipedia.org/wiki/Magnification>https://en.wikipedia.org/wiki/Magnification</a></li><li>Powell, V. (n.d.). Image Kernels explained visually. Setosa.IO. Retrieved June 19, 2023, from <a href=https://setosa.io/ev/image-kernels/>https://setosa.io/ev/image-kernels/</a></li><li>Vitor Hugo Carvalho. (2012). Image Processing: Methods, Applications and Challenges. Nova.</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/29a079f70a161bea2e0cbcab3ed314fb749e415c title='Last modified by Daniel991104 | June 19, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 19, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#image-processing>Image Processing</a><ul><li><a href=#1-introduction--background>1. Introduction & Background</a></li><li><a href=#2-code--results>2. Code & results</a></li><li><a href=#3-conclusions--future-work>3. Conclusions & future work</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></aside></main></body></html>